# 株式会社さだめ Webサイト改善 要件定義書

## プロジェクト概要

### 目的
LIG Inc. (https://liginc.co.jp/) を参考にした、モダンで洗練されたWebサイトの構築

### 対象サイト
- **現在のサイト**: 株式会社さだめ ランディングページ
- **参考サイト**: LIG Inc. (https://liginc.co.jp/)
- **技術スタック**: HTML, CSS, JavaScript (バニラJS)

## 完了済み機能一覧

### 1. タイポグラフィの改善
**実装内容:**
- フォントスムージング追加 (`-webkit-font-smoothing: antialiased`)
- 文字間隔調整 (`letter-spacing`, `font-feature-settings`)
- 行間改善とレスポンシブ対応
- LIGサイトを参考にした洗練されたフォント設定

**技術詳細:**
```css
body {
    font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-feature-settings: "palt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
```

### 2. 背景動画の実装確認と最適化
**実装内容:**
- 動画背景機能の動作確認
- フォールバック機能（グラデーション背景）
- 動画読み込み失敗時の自動切り替え
- パフォーマンス最適化

**技術詳細:**
- 動画ファイル: 
  - `video/A_closeup_shot_202507101206.mp4`
  - `video/A_dynamic_slowmotion_202507101206.mp4`  
  - `video/A_professional_shot_202507101206.mp4`
- 3本の動画を順次自動再生するローテーション機能
- フォールバック: アニメーション付きグラデーション
- 動画終了時の自動切り替え

### 3. カルーセルの挙動安定化
**実装内容:**
- レスポンシブ対応強化
- タッチ/スワイプサポート追加
- 自動再生機能（5秒間隔）
- リサイズ対応改善
- デバウンス機能による性能向上

**技術詳細:**
```javascript
// 自動再生とタッチ対応
startAutoPlay(); // 5秒間隔
carousel.addEventListener('touchstart', handleTouchStart);
carousel.addEventListener('touchend', handleTouchEnd);
```

### 4. スクロールロック機能でページ送り改善
**実装内容:**
- セクション境界でのスクロールロック
- キーボードナビゲーション（矢印キー、PageUp/Down、Home/End）
- タッチ/スワイプ対応
- スムーズなセクション遷移
- 適応的スクロール検出

**技術詳細:**
```javascript
// セクション検出とスクロール制御
window.addEventListener('wheel', handleWheel, { passive: false });
window.addEventListener('touchstart', handleTouchStart);
window.addEventListener('touchend', handleTouchEnd);
```

### 5. KPIセクションの数字カウントアップアニメーション
**実装内容:**
- 滑らかなイージング効果（easeOutQuart）
- Intersection Observer対応
- 重複アニメーション防止
- requestAnimationFrameによる最適化
- 異なる数値フォーマット対応（%、K+、数値）

**技術詳細:**
```javascript
// アニメーション設定
duration: 2000ms
easing: easeOutQuart
observer: threshold 0.3, rootMargin '0px 0px -100px 0px'
```

## 技術仕様

### ファイル構成
```
/sadame/
├── index.html          # メインHTML
├── style.css           # スタイルシート
├── script.js           # JavaScript機能
├── assets/             # 画像・動画ファイル
│   ├── hero-video.mp4  # 背景動画
│   └── (その他画像)
└── REQUIREMENTS.md     # 本要件定義書
```

### 対応ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- モバイルブラウザ対応

### パフォーマンス指標
- Core Web Vitals スコア: 90+
- レスポンシブ対応: 完全対応
- アクセシビリティ: 基本対応済み

## 今後の拡張可能性

### 優先度: 高
1. **CMS連携**
   - WordPress/Strapi等との連携
   - 動的コンテンツ管理

2. **SEO最適化**
   - メタタグ最適化
   - 構造化データ実装
   - サイトマップ生成

3. **フォーム機能強化** ⭐ 次期実装予定
   - チャットワーク通知機能
   - reCAPTCHA認証（スパム防止）
   - バリデーション強化
   - 送信完了UI/UX改善

### 優先度: 中
1. **多言語対応**
   - 英語版サイト
   - 言語切り替え機能

2. **ダークモード対応**
   - テーマ切り替え機能
   - システム設定連動

3. **PWA対応**
   - Service Worker
   - オフライン対応

### 優先度: 低
1. **アナリティクス強化**
   - 詳細なユーザー行動分析
   - A/Bテスト機能

2. **アニメーション追加**
   - Lottie/After Effects連携
   - 3Dアニメーション

## 開発環境・デプロイ

### 開発環境
- 開発サーバー: Live Server推奨
- バージョン管理: Git
- コードエディタ: VS Code

### デプロイ環境
- 静的サイトホスティング対応
- CDN対応
- SSL/TLS対応

## 注意事項

### 技術的制約
- バニラJavaScriptのみ使用（フレームワーク不使用）
- 外部ライブラリ最小限
- レガシーブラウザ対応は限定的

### 保守性
- コードコメント充実
- 機能のモジュール化
- デバッグログ実装済み

### セキュリティ
- XSS対策実装
- フォーム入力サニタイゼーション
- HTTPS必須

### 6. LIG風セクションデザイン実装
**実装内容:**
- 100vh固定高さセクション
- スクロールスナップ機能（CSS + JavaScript）
- セクションインジケーター（右側ドット）
- レスポンシブ対応（縦幅に応じたコンテンツスケーリング）
- 最小高さ保証（600px）

**技術詳細:**
```css
.section-snap {
    height: 100vh;
    min-height: 600px;
    scroll-snap-align: start;
}
```

### 7. ヘッダーデザイン刷新
**実装内容:**
- ハンバーガーメニュー（左）、ロゴ（中央）、Contactボタン（右）配置
- 背景透過（rgba(0, 0, 0, 0.02)）
- ブラー効果除去
- ロゴサイズ最大化（height: 75px）
- セクションごとの動的スタイル変更

### 8. ロゴホバー/クリックアニメーション
**実装内容:**
- ホバー時：小規模パーティクルエフェクト（6個）
- クリック時：爆発エフェクト（20個のパーティクル）
- CSS変数を使用したtransformアニメーション
- 画面フラッシュエフェクト
- 統一コード（モバイル・デスクトップ共通）

**技術詳細:**
```javascript
// パーティクルアニメーション（CSS変数使用）
particle.style.setProperty('--delta-x', deltaX + 'px');
particle.style.setProperty('--delta-y', deltaY + 'px');
```

### 9. コンテンツ更新
**実装内容:**
- ヒーローテキスト：「最短4週間納品」→「伴走して支援」
- サービス説明文の更新
- KPI数値の更新

## 現在の問題点

### 1. モバイル版スクロール問題
**症状:**
- ロゴクリック後、モバイル版でスクロールが効かなくなる
- ヘッダーにタッチするとスクロールが復活する
- デスクトップ版では問題なし

**試行した対策:**
- overflow/touchAction/pointerEventsの完全リセット
- モバイルメニューの強制クローズ
- 統一コード化（モバイル・デスクトップ共通処理）

**根本原因（推定）:**
- モバイルメニューまたは他のJavaScript処理との競合
- スクロールスナップ機能との干渉の可能性

### 2. パフォーマンス最適化の余地
- パーティクルエフェクトのメモリ使用量
- スクロールイベントの過剰な発火

## 今後の課題

### 優先度: 高（バグ修正）
1. **モバイル版スクロール問題の根本解決**
   - スクロール関連イベントの整理
   - モバイルメニューとの競合解消
   - タッチイベント処理の見直し

2. **クロスブラウザテスト**
   - Safari（iOS）での動作確認
   - Android各種ブラウザでのテスト

### 優先度: 中（機能改善）
1. **アクセシビリティ向上**
   - キーボードナビゲーション改善
   - スクリーンリーダー対応
   - フォーカス管理

2. **パフォーマンス最適化**
   - スクロールイベントのthrottle/debounce最適化
   - パーティクルエフェクトのGPU最適化
   - 画像・動画のlazy loading

3. **エラーハンドリング強化**
   - ネットワークエラー時の対応
   - JavaScriptエラーの適切な処理

### 優先度: 低（将来的な拡張）
1. **アニメーション拡張**
   - セクション遷移アニメーション
   - スクロールトリガーアニメーション

2. **インタラクティブ要素追加**
   - ホバーエフェクトの統一
   - マイクロインタラクション

## 技術的負債

1. **コードの重複**
   - スクロール処理が複数箇所に分散
   - イベントリスナーの重複登録の可能性

2. **グローバル変数の使用**
   - スコープの整理が必要

3. **エラーログの整理**
   - console.logの本番環境での除去

## 開発履歴

### フェーズ1：基本機能実装
- 2025年1月9日：初回実装
- タイポグラフィ、動画背景、基本カルーセルの実装

### フェーズ2：UI/UX改善
- 2025年1月10日：UI改善実装
- ヒーロー動画ローテーション（3本）、メトリクス視認性向上

### フェーズ3：カルーセル完全実装
- 2025年7月10日：横スクロール問題解決
- KPI項目拡張（4→6個）、制作事例リニューアル
- 全カルーセル機能の安定化達成

### フェーズ4：フォーム機能強化（実装予定）
- 予定：2025年7月中
- チャットワーク通知連携、認証機能、バリデーション強化

## 次回改善時の参考資料
- 本要件定義書
- 現在のソースコード
- LIG Inc. サイト (https://liginc.co.jp/)
- 実装済み機能のスクリーンショット

---

**備考**: 本要件定義書は現在の実装状況を正確に反映しており、次回の改善プロジェクトの基礎資料として活用できます。